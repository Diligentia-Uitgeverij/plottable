<html>
  <head>
    <title>Basic VerticalBar</title>
    <link rel="stylesheet" type="text/css" href="../../plottable.css">
    <style>
    svg {
        margin-bottom: 20px;
    }

    div {
        height: 300px;
        padding: 20px;
        width: 400px;
    }
    </style>
    <script src="../../bower_components/d3/d3.js" charset="utf-8"></script>
    <!-- <script src="https://cdn.rawgit.com/palantir/plottable/develop/plottable.js"></script> -->
    <script src="../../plottable.js"></script>
    <script src="../exampleUtil.js"></script>

    <script>
    function verticalChart() {
        var data = [
            {x: "A", y: 1},
            {x: "B", y: 2}
        ];
        var xScale = new Plottable.Scale.Ordinal();

        var label1 = new Plottable.Component.Label("the first label", "left");    
        var yScale1 = new Plottable.Scale.Linear();
        var plot1 = new Plottable.Plot.Bar(xScale, yScale1);
        plot1.addDataset(data);
        plot1.project("x", "x", xScale).project("y", "y", yScale1);
        
        var label2 = new Plottable.Component.Label("two", "left");
        var yScale2 = new Plottable.Scale.Linear();
        var plot2 = new Plottable.Plot.Bar(xScale, yScale2);
        plot2.addDataset(data);
        plot2.project("x", "x", xScale).project("y", "y", yScale2);

        var label3 = new Plottable.Component.Label("theee", "left");
        var yScale3 = new Plottable.Scale.Linear();
        var plot3 = new Plottable.Plot.Bar(xScale, yScale3);
        plot3.addDataset(data);
        plot3.project("x", "x", xScale).project("y", "y", yScale3);
        
        var chart = new Plottable.Component.Table([
            [label1, plot1],
            [label2, plot2],
            [label3, plot3]
        ]);
        chart.renderTo("#chart");
    }

    function horizontalChart() {
        var data = [
            {x: "A", y: 1},
            {x: "B", y: 2},
            {x: "C", y: 4}
        ];
        var yScale = new Plottable.Scale.Linear();

        var label1 = new Plottable.Component.Label("the first label");    
        var xScale1 = new Plottable.Scale.Ordinal();
        var plot1 = new Plottable.Plot.Bar(xScale1, yScale);
        plot1.addDataset(data);
        plot1.project("x", "x", xScale1).project("y", "y", yScale);
        
        var label2 = new Plottable.Component.Label("two");
        var xScale2 = new Plottable.Scale.Ordinal();
        var plot2 = new Plottable.Plot.Bar(xScale2, yScale);
        plot2.addDataset(data);
        plot2.project("x", "x", xScale2).project("y", "y", yScale);
        
        var label3 = new Plottable.Component.Label("hurrrrr");
        var xScale3 = new Plottable.Scale.Ordinal();
        var plot3 = new Plottable.Plot.Bar(xScale3, yScale);
        plot3.addDataset(data);
        plot3.project("x", "x", xScale3).project("y", "y", yScale);

        var chart = new Plottable.Component.Table([
            [label1, label2, label3],
            [plot1, plot2, plot3]
        ]);
        chart.renderTo("#chart2");
    }

    function fixComponentSize(c, fixedWidth, fixedHeight) {
        c._requestedSpace = function (w, h) {
            return {
                width: fixedWidth == null ? 0 : fixedWidth,
                height: fixedHeight == null ? 0 : fixedHeight,
                wantsWidth: fixedWidth == null ? false : w < fixedWidth,
                wantsHeight: fixedHeight == null ? false : h < fixedHeight
            };
        };
        c._fixedWidthFlag = fixedWidth == null ? false : true;
        c._fixedHeightFlag = fixedHeight == null ? false : true;
        return c;
    }

    function fixedChart() {
        var label1 = new Plottable.Component.Label("label");
        fixComponentSize(label1, 100, 100);
        console.log(label1);
        var label2 = new Plottable.Component.Label("label2");
        fixComponentSize(label2, 100, 100);
        var label3 = new Plottable.Component.Label("la");
        var chart = new Plottable.Component.Table([
            [label1, label2]
        ]);
        var result = chart._iterateLayout(220, 200);
        console.log(result);
        chart.renderTo("#chart3");
    }

    window.onload = function() {
        // verticalChart();
        // horizontalChart();
        fixedChart();
    };

    </script>
  </head>

  <body>
    <!-- <svg id="chart" width="400" height="300"></svg>
    <svg id="chart2" width="400" height="300"></svg> -->
    <svg id="chart3" width="220" height="120"></svg>
  </body>

</html>
